<script type="text/javascript">
    RED.nodes.registerType('FormatEarth',{
        category: 'location',
        color: '#E6E0F8',
        defaults: {
            name: {value:""},
            clear: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "hash.png",
        paletteLabel: 'Format Earth',
        label: function() {
            return this.name || "Format Earth";
        }
    });
</script>

<script type="text/x-red" data-template-name="FormatEarth">
    
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i>Name</label>
        <input type="text" id="node-input-name" placeholder="Format Earth">
    </div>
    <div class="form-row">
        <label for="node-input-clear"><i class="icon-tag"></i>Clear excess data?</label>
        <input type="checkbox" id="node-input-clear">
    </div>

</script>
<style>
.form-row label {
    vertical-align: middle;
}
textarea{
    width: 70%;
}
select{
    width: 70%;
}
</style>

<script type="text/x-red" data-help-name="FormatEarth">
    <!--Main help-->
    <h1 class="titles">Format Earth</h1>
        <!--Summary-->
        <h2 class="titles">Summary</h2>
            <p> 
                Converts the output of the Satellites node into a suitable input for the Earth node.
            </p>
            <p>
                The position data of all satellites is reconfigured so that it can be suitably used passed to the Earth node. 
            </p>
        <hr>

        <!--Inputs-->
        <h2 class="titles">Inputs</h2>
            <!--Minimum Input-->
            <h3 class="titles">Default</h3>
                <p>
                    The Earth node requires a sufficiently configured Satellite node, with the <span class="code">Output Coordinate System</span> set to <span class="code">Euclidean 3D</span>. Use with the Time Array node is not yet integrated.
                </p>
        <hr>

        <!--Controls-->
        <h2 class="titles">Controls</h2>
            <dl>
                <dt class="io">
                    <p>
                        Clear Excess?
                    </p>
                </dt>
                <dd>
                Checking this tickbox will delete all excess properties from the <code>msg.payload</code>, and only leave the properties required by default for the Earth node.
                </dd>
            </dl>
        <hr>

        <!--Outputs-->
        <h2 class="titles">Outputs</h2>
            <p>
                The array of satellites is separated so that each satellite is represented by it's own message. 
            </p>
            <!--Minimum Output-->
            <h3 class="titles">Default per Satellite</h3>
                <dl>
                    <dt>
                        <p>
                            <code>name</code>
                                <span class="data-type"> 
                                    string
                                </span>
                        </p>
                    </dt>
                    <dd>
                        <p>
                            Received from the Satellite node, this is the name of the satellite.
                        </p>
                    </dd>
                    <dt>
                        <p>
                        <code>position</code>
                                <span class="data-type"> 
                                    array
                                </span>
                        </p>
                    </dt>
                    <dd>
                        <p>
                            Received from the Satellite node, this is the position of the satellite.
                        </p>
                    </dd>
                </dl>
            <!--Additional Properties-->
            <h3 class="titles">Additional Properties</h3>
                <dl>
                    <dt class="io">
                        <p>
                            <code>color</code>
                                <span class="data-type"> 
                                    string
                                </span>
                        </p>
                    </dt>
                    <dd>
                        <p>
                            The <code>color</code> property is a hexadecimal HTML colour code, written as a string, e.g. '#800000'. 
                            <br>
                            This will override the default color of the sphere's rendered for a given plotted object.
                            <br>
                            <b>Not currently integrated.</b>
                        </p>
                    </dd>
                </dl>
</script>
<style>
    h1.titles, h2.titles{
        line-height:20px;
    }
    h3.titles{
        line-height:20px;
        font-weight:bold;   
    }
    dt.io{
        color: #AD1625;
        font-weight: bold;

    }
    dt.io-optional{
        color: #AD1625;
        font-weight: bold;
        font-style: italic;

    }
    span.data-type{
        float: right;
        font-style: italic;
        font-weight: lighter;
        font-size: 11px;
        color: #666;
    }
    span.code{
        font-family: "Courier New", Monospace;
    }
</style>



















<script type="text/javascript">
    RED.nodes.registerType('FormatWorldmap',{
        category: 'location',
        color: '#E6E0F8',
        defaults: {
            name: {value:""},
            clear: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "hash.png",
        paletteLabel: 'Format Worldmap',
        label: function() {
            return this.name || "Format Worldmap";
        }
    });
</script>

<script type="text/x-red" data-template-name="FormatWorldmap">
    
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i>Name</label>
        <input type="text" id="node-input-name" placeholder="Format Worldmap">
    </div>
    <div class="form-row">
        <label for="node-input-clear"><i class="icon-tag"></i>Clear excess?</label>
        <input type="checkbox" id="node-input-clear" value="none">
    </div>

</script>
<style>
.form-row label {
    vertical-align: middle;
}
textarea{
    width: 70%;
}
select{
    width: 70%;
}
</style>

<script type="text/x-red" data-help-name="FormatWorldmap">
    <!--Main help-->
    <h1 class="titles">Format Worldmap</h1>
        <!--Summary-->
        <h2 class="titles">Summary</h2>
            <p> 
                Converts the output of the Satellites node into a suitable input for the Worldmap node.
            </p>
            <p>
                The position data of all satellites is reconfigured so that it can be suitably used passed to the Earth node.
            </p>
        <hr>

        <!--Inputs-->
        <h2 class="titles">Inputs</h2>
            <!--Minimum Input-->
            <h3 class="titles">Default</h3>
                <p>
                    The Worldmap node requires a sufficiently configured Satellites nodes, with the <span class="code">Output Coordinate System</span> set to <span class="code">Lat/Long (degrees)</span>.
                </p>

        <!--Controls-->
        <h2 class="titles">Controls</h2>
            <dl>
                <dt class="io">
                    <p>
                        Clear Excess?
                    </p>
                </dt>
                <dd>
                    Checking this tickbox will delete all excess properties from the <code>msg.payload</code>, and only leave the properties required by default for the Worldmap node.
                </dd>
            </dl>
        <hr>

        <!--Outputs-->
        <h2 class="titles">Outputs</h2>
            <p>
                The array of satellites is separated so that each satellite is represented by it's own message. 
                <br>
                If there is an array of lat/long positions, then this is used to create trajectory line segments. Each line segment is also it's own message.
                <br>
                The total output of the node is all of these messages, where lines and markers relating to a particular satellite belong to the same layer.
            </p>
            <!--Minimum Output-->
            <h3 class="titles">Default per Satellite</h3>
                <dl>
                    <dt>
                        <p>
                            <code>name</code>
                                <span class="data-type"> 
                                    string
                                </span>
                        </p>
                    </dt>
                    <dd>
                        <p>
                            Received from the Satellite node, this is the name of the satellite.
                        </p>
                    </dd>
                    <dt>
                        <p>
                            <code>layer</code>
                                <span class="data-type"> 
                                    string
                                </span>
                        </p>
                    </dt>
                    <dd>
                        <p>
                            The layer keeps the satellite marker grouped with any potential trajectory lines,and can be toggled in the map view. This is set to be the name of the satellite.
                        </p>
                    </dd>
                    <dt>
                        <p>
                        <code>lat</code>/<code>lon</code> or <code>line</code>
                                <span class="data-type"> 
                                    number | array
                                </span>
                        </p>
                    </dt>
                    <dd>
                        <p>
                            A marker representing the current position of a satellite contains the properties <code>lat</code> and <code>lon</code>, with angles given in degrees.
                            <br>
                            Line segments contain the property <code>line</code>, which is an array of latitude and longitude coordinates for which a polyline can be drawn. 
                            <br>
                            A trajectory may need to be split into multiple line segments if the line is long enough to wrap around the 360 degrees of longitude. 
                            <b>Low Resolution lines may not be segmented properly, resulting in glitching.</b>
                        </p>
                    </dd>
                </dl>
            <!--Additional Properties-->
            <h3 class="titles">Additional Properties</h3>
                <dl>
                    <dt class="io">
                        <p>
                            <code>color</code>
                                <span class="data-type"> 
                                    string
                                </span>
                        </p>
                    </dt>
                    <dd>
                        <p>
                            The <code>color</code> property is a hexadecimal HTML colour code, written as a string, e.g. '#800000'. 
                            <br>
                            This will override the default color of the sphere's rendered for a given plotted object.
                            <b>Not currently integrated</b>
                        </p>
                    </dd>
                </dl>
</script>
<style>
    h1.titles, h2.titles{
        line-height:20px;
    }
    h3.titles{
        line-height:20px;
        font-weight:bold;   
    }
    dt.io{
        color: #AD1625;
        font-weight: bold;

    }
    dt.io-optional{
        color: #AD1625;
        font-weight: bold;
        font-style: italic;

    }
    span.data-type{
        float: right;
        font-style: italic;
        font-weight: lighter;
        font-size: 11px;
        color: #666;
    }
    span.code{
        font-family: "Courier New", Monospace;
    }
</style>



















<!--Format Template-->
<!--
<script type="text/javascript">
    RED.nodes.registerType('template',{
        category: 'Maps',
        color: '#E6E0F8',
        defaults: {
            name: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "hash.png",
        label: function() {
            return this.name || "template";
        }
    });
</script>

<script type="text/x-red" data-template-name="template">
    
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> TLE 2</label>
        <input type="text" id="node-input-tle2" placeholder="Format Earth">
    </div>

</script>

<script type="text/x-red" data-help-name="template">
    <!-Main help->
    <h1 class="titles">Earth</h1>
        <!-Summary->
        <h2 class="titles">Summary</h2>
            <p> 
                Converts the output of the Satellites node into a suitable input for the Earth node.
            </p>
            <p>
                :::
            </p>
        <hr>
        <!-Inputs->
        <h2 class="titles">Inputs</h2>
            <!-Minimum Input->
            <h3 class="titles">::</h3>
                <p>
                    :::
                </p>
        <!-Outputs->
        <h2 class="titles">Outputs</h2>
            <!-Minimum Input->
            <h3 class="titles">::</h3>
                <p>
                    :::
                </p>
</script>
-->
